# 크리에이터별 챌린지 기능 스펙 (MVP)

## 1) 목표/배경
- 크리에이터의 팔로워 유입을 촉진하고, 플랫폼 내 UGC(인증), 참여율, 재방문을 상승시킨다.
- TikTok 2025 트렌드(Brand Fusion): 크리에이터-커뮤니티 공동 제작을 제품 내 구조로 담는다.
- KPI(핵심): 크리에이터 리퍼러로 인입한 신규가입수, 챌린지 참여율, 인증 게시물수, 외부 공유수, D7 잔존.

## 2) 페르소나/권한
- Creator(인증됨): 챌린지 개설/링크 배포, 대시보드로 참여 현황 확인.
- Student: 참여/인증 제출/공유.
- Admin: 챌린지 승인/핀고정/모더레이션/우승자 확정.

## 3) 핵심 개념
- Challenge: 기간 한정 테마 미션(예: #집중한시간챌린지). 규칙/해시태그/보상 포함.
- Submission: `StudyProof`와 1:1 또는 N:1 매핑. 태그 기반 자동 참여.
- Reward: 배지/프로필 프레임/Chips(응원 포인트) 등 비금전 보상(초기).
- Attribution: 크리에이터 ref 파라미터로 랜딩→가입/참여 연결 추적.

## 4) MVP 범위(작게 시작)
- 동시 진행 챌린지 최대 3개.
- 태그 기반 자동 참여(인증 게시물에 지정 해시태그 포함 시 자동 매핑).
- 챌린지 개설은 초기 Admin 툴에서 수동 생성(크리에이터 콘솔은 2차).
- 우승자/하이라이트는 운영팀 수동 확정(주간 1회).

## 5) 사용자 플로우
- Creator
  1) 운영 협의 후 챌린지 생성(Admin).
  2) 공유 링크 수령: `/challenges/[id]?ref={creatorHandle}`.
  3) 틱톡/인스타/유튜브 쇼츠에 영상+링크+해시태그로 안내.
  4) (선택) 참여 현황 대시보드에서 조회.
- Student
  1) 랜딩(`/challenges/[id]`) → 규칙/보상 확인 → 참여하기.
  2) 인증 업로드(사진/설명/해시태그 자동 프리필) → `StudyProof` 생성.
  3) 공유 카드 생성 → 외부 SNS 공유.
- Admin
  1) 챌린지 생성/수정/종료, 커뮤니티 핀고정.
  2) 신고/부적절 콘텐츠 처리, 우승자 선정, 요약 리포트.

## 6) 데이터 모델(초기 Redis)
- `challenge:{id}` → `{ title, desc, creatorUserId, hashtag, rules, coverImage, rewardFrameId, startAt, endAt, status }`
- `challenge:list:active` → ZSET(정렬: endAt)
- `challenge:participants:{id}` → SET(userId)
- `challenge:submissions:{id}` → LIST(proofId)
- `user:{id}:challenge:{challengeId}` → `{ joinedAt, submittedProofId, cheers, score }`
- `ref:creator:{creatorId}` → `{ clicks, landings, signups, participants }`

## 7) API 스펙(초안)
- POST `/api/challenges` (admin)
  - body: `{ title, desc, creatorUserId, hashtag, rules, coverImage, rewardFrameId, startAt, endAt }`
- GET `/api/challenges?status=active`
- GET `/api/challenges/[id]`
- POST `/api/challenges/[id]/join` (학생이 누르면 participants에 add)
- POST `/api/challenges/[id]/submit` → `{ proofId }`(또는 새 proof 생성 payload)
- GET `/api/challenges/[id]/submissions?sort=top|new`
- POST `/api/challenges/[id]/pin` (admin)
- GET `/api/creators/[id]/stats?challengeId=...` (간단 집계)
- Attribution: 모든 `/challenges/[id]` 진입 시 `?ref=` 쿠키 저장 → 가입/참여 시 카운트.

## 8) UI/라우팅
- 페이지
  - `app/challenges/page.tsx` — 진행중 챌린지 리스트.
  - `app/challenges/[id]/page.tsx` — 챌린지 상세(규칙, 남은시간, 보상, 참가/제출 버튼, 제출 피드).
  - `app/admin/challenges/page.tsx` — 간이 생성/관리(내부용).
- 컴포넌트
  - `components/challenge/ChallengeCard.tsx`
  - `components/challenge/ChallengeHero.tsx`
  - `components/challenge/SubmissionList.tsx`
- 기존 연동
  - `app/community/page.tsx` — 공지/핀 고정(공식 챌린지).
  - `components/study/StudyProofCard.tsx` — "챌린지 제출" 버튼(+ 공유 카드 버튼).

## 9) 제출/참여 UX 디테일
- 인증 작성 시 해시태그 자동 프리필(`#챌린지명`).
- 이미 올린 `StudyProof`도 상세에서 "챌린지 제출"로 연결 가능.
- 외부 공유 카드: 챌린지 테마 프레임 자동 적용 → `/api/share-card/{proofId}?theme=challenge-{id}`.

## 10) 그로스/어트리뷰션
- 공유 링크: `/challenges/[id]?ref={creatorHandle}` → 쿠키(`ref_creator`).
- 지표 연결: 랜딩뷰/가입/참여/제출/공유 이벤트 파이프라인(초기 log→Redis 카운터).
- 크리에이터 리포트: 조회수, 참가자수, 제출수, 외부 공유 추정치.

## 11) 모더레이션/안전
- 기본 옵션: 얼굴 자동 블러, 위치 메타데이터 제거.
- 신고/차단: 커뮤니티 공통 플로우 재사용.
- 부적절/표절 방지: 샘플 검수 + 경고/제외 처리.
- 미성년자 정책 표기: 챌린지 규칙 하단 고지.

## 12) 성공 지표(KPI)
- 크리에이터 ref 유입 신규가입수/전환율.
- 챌린지 참여율(랜딩→참여 클릭), 제출율(참여→인증 업로드).
- UGC/인증 게시물수, 응원/댓글 상호작용, 외부 공유수.
- D1/D7 잔존(챌린지 유입군 vs 일반군).

## 13) 2주 MVP 타임라인
- 1주차
  - 데이터 모델/엔드포인트: `GET/POST challenges`, join/submit.
  - `app/challenges/[id]` 상세 + 리스트 페이지.
  - `StudyProofCard`에 "챌린지 제출" 버튼 추가(태그 기반 매핑).
  - 커뮤니티 핀 고정/공지 템플릿.
- 2주차
  - Attribution(`?ref=`) 쿠키/집계, 간이 크리에이터 통계.
  - 공유 카드 프레임(테마) + SNS 가이드.
  - 운영용 우승자 지정/하이라이트 배지 지급.

## 14) 리스크/대응
- 품질 편차: 템플릿/가이드 제공, 공식 예시 게시.
- 안전/저작권: 자동 블러/메타 제거, 신고 라우트 강조.
- 남용: 초기엔 초대된 크리에이터만 진행(화이트리스트).

## 15) 오픈 이슈
- 보상 정책(배지/프레임 외 추가 인센티브?)
- 학교 단위/지역 단위 챌린지 확장 여부.
- 크리에이터 콘솔(자가 개설) 타이밍.
