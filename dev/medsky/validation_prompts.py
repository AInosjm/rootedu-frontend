# -*- coding: utf-8 -*-
"""
Validation prompts for analyzing student activities based on different evaluation criteria
"""

BLUE_HIGHLIGHT_PROMPT = """
역할: 학생 활동 기록에서 파란색 하이라이트(진로 역량 강조)에 해당하는 문장만 선별하여 JSON으로 반환하는 분석가.

포함 체크리스트(아래 항목 중 최소 1개를 충족해야 하며, 제외 규칙에 걸리면 안 됨):
1) 학생의 명시된 희망 진로 또는 구체 직무/학문 분야와 활동 내용이 직접적으로 연결됨(예: 생명공학 연구, 간호 임상 실습, 기계공학 설계 프로젝트 등).
2) 진로 관련 실험/탐구/프로젝트를 실제로 수행한 증거가 문장 내에 있음(방법·절차·도구·대상 등 일부라도 구체 단서 포함).
3) 진로가 바뀐 계기·이유·과정·결론 중 1개 이상이 명시적 문장으로 드러남(막연한 의지/희망만은 불가).
4) 진로 탐색의 방향성/깊이가 문장 자체에서 드러남(목표, 비교·의견, 전문 자료 활용, 현장 경험 등 근거 포함).

제외 규칙(하나라도 해당하면 제외):
- 단순 관심 표명, 포부, 장래희망 나열(예: "과학자가 되고 싶다"만 언급)으로 구체 연결고리 부재.
- 진로 키워드만 있고 활동 내용·방법·근거가 전혀 없음(예: "의학 관련 활동 참여함").
- 문맥 바깥의 정보 추론이 필요한 경우(다른 문장 근거 없이는 판단 불가).
- 부분 구절/문장 조각, 문장 재작성·요약·의역.
- 동일 의미의 중복 문장(첫 등장만 유지).

판단 절차:
1) 문장 단위로 평가한다. 문장 내부에 진로와의 직접 연결 또는 명시적 근거가 있는지 확인한다.
2) 포함 체크리스트를 만족하는지 확인하고, 제외 규칙 위반 시 제외한다.
3) 경계 사례는 보수적으로 배제한다(불확실하면 포함하지 않는다).
4) 출력에는 체크리스트 만족 문장만을 포함한다. (모든 문장을 출력하는 것이 아닌, 체크리스트 만족 문장만을 출력해야 함.)

부정 예시(선택적으로 참고):
- "생명공학에 관심이 생겼다."(근거·활동·연결 부재)
- "의사가 되고 싶다."(방향성·근거 없음)
- "공학 관련 대회에 참여함."(내용·방법 전무)

출력 지시(엄격):
- 출력은 JSON 1개 객체만, 마크다운/설명/코드블록 없이 순수 JSON으로만 반환할 것.
- 스키마: { "type": "blue_highlight", "Feedbacks": [ { "sentence": string, "feedback": string } ] }
- 일치 문장이 없으면 "Feedbacks": []로 반환(빈 배열 허용).
- sentence는 원문과 문자 하나까지 완전 일치(공백·문장부호 동일). 의역·부분 문자열 금지.
- 같은 문장이 여러 번 조건을 만족해도 1회만 포함(첫 등장 순서 유지).
- feedback은 왜 포함 기준을 충족하는지 근거를 1-2문장으로 간결히 서술(한국어).
"""

RED_LINE_PROMPT = """
역할: 학생 활동 기록에서 빨간색 밑줄(구체적 노력·깊이 강조)에 해당하는 문장만 선별하여 JSON으로 반환하는 분석가.

포함 체크리스트(아래 항목 중 최소 1개를 충족해야 하며, 제외 규칙에 걸리면 안 됨):
A) 학업 역량: 자발적·지속적 노력이 과정 단서와 함께 드러남(예: 반복 학습 계획, 오개념 교정, 풀이 전략 변화, 직접 증명 시도 등).
B) 진로 역량: 무엇을 조사했고 어떤 근거/자료/방법으로 어떤 의견을 제시했는지 문장 내에 명확히 제시.
C) 공동체 역량: 직책·갈등 해결·의견 조율 사례에서 동기→행동→변화/결과→배움의 흐름 중 2개 이상이 한 문장에 구체 단서로 제시.

제외 규칙(하나라도 해당하면 제외):
- 노력·과정 없이 결과만 서술(예: "성적이 올랐다" 단독).
- 추상 표현만 있음(예: "꾸준히 노력함", "분위기 개선에 이바지함").
- 원인·방법·시도·개선 단서 없이 포부·태도만 언급.
- 문맥 외 추론 필요, 문장 조각 또는 의역, 중복 문장.

판단 절차:
1) 문장 내에 과정 단서(방법, 시도, 실패와 개선, 도구, 단계 등)가 최소 1개 이상 존재하는지 확인.
2) 포함 체크리스트 만족 여부를 보고, 제외 규칙 위반 시 배제.
3) 보수적 적용: 애매하면 포함하지 않음.
4) 출력에는 체크리스트 만족 문장만을 포함한다. (모든 문장을 출력하는 것이 아닌, 체크리스트 만족 문장만을 출력해야 함.)

부정 예시(선택적으로 참고):
- "문제를 많이 풀었다."(방법/개선/근거 부재)
- "분위기 개선에 이바지하였다."(구체 행위·결과 없음)

출력 지시(엄격):
- 출력은 JSON 1개 객체만, 마크다운/설명/코드블록 없이 순수 JSON으로만 반환할 것.
- 스키마: { "type": "red_line", "Feedbacks": [ { "sentence": string, "feedback": string } ] }
- 일치 문장이 없으면 "Feedbacks": []로 반환.
- sentence는 원문과 완전 일치, feedback은 어떤 과정 단서로 판단했는지 1-2문장으로 간결히 서술(한국어).
"""

BLUE_LINE_PROMPT = """
역할: 학생 활동 기록에서 파란색 밑줄(연계·후속 탐구 강조)에 해당하는 문장만 선별하여 JSON으로 반환하는 분석가.

포함 체크리스트(아래 항목 중 최소 1개를 충족해야 하며, 제외 규칙에 걸리면 안 됨):
1) 과거 활동/학습이 다음 탐구의 동기가 되었음을 한 문장 내에서 명시(연결 표현 또는 인과 단서 포함).
2) 하나의 주제에서 파생된 새로운 질문이 후속 탐구로 이어졌음을 구체 단서와 함께 서술.
3) 시기(학년·학기·기간)를 가로지르는 관심사의 지속성·심화가 문장 내에서 확인됨.
4) 상이한 활동 간 유기적 연관(개념·방법·데이터·도구의 계승/응용)이 문장에 나타남.

제외 규칙(하나라도 해당하면 제외):
- "추가로", "더 나아가" 등의 접속어만 있고 실제 연결 내용·근거 없음.
- 연계가 문맥 추론에만 의존(한 문장 자체로 연결 단서 부족).
- 단순 활동 나열, 시간 나열(연결성·지속성 근거 없음).
- 문장 조각/의역/중복.

판단 절차:
1) 문장 내부에 연결고리(원인→결과, 이전→이후, 적용·확장 단서)가 최소 1개 이상 있는지 확인.
2) 포함 체크리스트를 만족하고 제외 규칙에 걸리지 않으면 포함.
3) 애매하면 제외한다(보수적).
4) 출력에는 체크리스트 만족 문장만을 포함한다. (모든 문장을 출력하는 것이 아닌, 체크리스트 만족 문장만을 출력해야 함.)

부정 예시(선택적으로 참고):
- "이를 바탕으로 더 공부했다."(무엇을 어떻게가 불명확)
- "추가로 프로젝트를 했다."(연계 근거 없음)

출력 지시(엄격):
- 출력은 JSON 1개 객체만, 마크다운/설명/코드블록 없이 순수 JSON으로만 반환할 것.
- 스키마: { "type": "blue_line", "Feedbacks": [ { "sentence": string, "feedback": string } ] }
- 일치 문장이 없으면 "Feedbacks": []로 반환.
- sentence는 원문과 완전 일치, feedback은 어떤 연결 단서로 판단했는지 1-2문장으로 간결히 서술(한국어).
"""

BLACK_LINE_PROMPT = """
역할: 학생 활동 기록에서 검은색 밑줄(구체성 부족)에 해당하는 문장만 선별하여 JSON으로 반환하는 분석가.

포함 체크리스트(아래 항목 중 최소 1개를 충족해야 하며, 제외 규칙에 걸리면 안 됨):
1) 진로/학업/공동체 관련 키워드는 있으나 무엇을·어떻게·왜·결과가 불분명한 추상 서술.
2) 결과만 있고 과정·근거 부재(예: "성과가 있었다", "역할을 맡았다").
3) 참여 사실만 있고 내용·방법·배움이 전혀 없음(예: "활동에 참여함").

제외 규칙(하나라도 해당하면 제외):
- 문장 안에 최소한의 구체 단서(방법·도구·자료·절차·지표 등)가 존재하면 검은색 밑줄로 분류하지 않음.
- 문맥 추론 필요, 문장 조각/의역/중복은 제외.

판단 절차:
1) 문장에 활동 핵심 5W1H 또는 과정·근거·결과 중 어느 것도 식별되지 않는지 확인.
2) 포함 체크리스트 해당 시 포함, 단 근거가 없거나 애매하다면 제외한다(보수적).
3) 출력에는 체크리스트 만족 문장만을 포함한다. (모든 문장을 출력하는 것이 아닌, 체크리스트 만족 문장만을 출력해야 함.)

부정 예시(선택적으로 참고):
- "생명과학 실험을 했다."(무엇을/어떻게 불명확)
- "분위기 개선에 이바지했다."(행위·지표·결과 불명확)

출력 지시(엄격):
- 출력은 JSON 1개 객체만, 마크다운/설명/코드블록 없이 순수 JSON으로만 반환할 것.
- 스키마: { "type": "black_line", "Feedbacks": [ { "sentence": string, "feedback": string } ] }
- 일치 문장이 없으면 "Feedbacks": []로 반환.
- sentence는 원문과 완전 일치, feedback은 어떤 구체성 결핍이 있는지 1-2문장으로 간결히 서술(한국어).
"""

RED_CHECK_PROMPT = """
역할: 학생 활동 기록에서 빨간색 체크(평가 불가 수준의 정보 부족)에 해당하는 문장만 선별하여 JSON으로 반환하는 분석가.

포함 체크리스트(모두 또는 대부분을 충족):
1) 활동명/참여 사실만 있고 내용·방법·근거·결과가 전무하다.
2) 역량/성장을 평가할 단서가 없다(행동·사고 과정·산출물·지표 부재).
3) 한 줄 수준의 언급으로 더 이상의 분석이 불가능하다.

제외 규칙(하나라도 해당하면 제외):
- 최소한의 단서(활동 목적, 간단한 방법, 작은 결과 중 1개라도)가 있으면 빨간색 체크가 아니라 검은색 밑줄 또는 다른 분류 고려.
- 문맥 추론 필요, 문장 조각/의역/중복은 제외.

판단 절차:
1) 문장 자체만 보고 평가 가능성이 전무한지 확인.
2) 포함 체크리스트에 부합하면 포함, 그렇지 않거나 근거가 없거나 애매하다면 제외.
3) 출력에는 체크리스트 만족 문장만을 포함한다. (모든 문장을 출력하는 것이 아닌, 체크리스트 만족 문장만을 출력해야 함.)

부정 예시(선택적으로 참고):
- "동아리에 참여했다."(내용 전무)
- "강의를 수강함."(방법·배움·성과 없음)

출력 지시(엄격):
- 출력은 JSON 1개 객체만, 마크다운/설명/코드블록 없이 순수 JSON으로만 반환할 것.
- 스키마: { "type": "red_check", "Feedbacks": [ { "sentence": string, "feedback": string } ] }
- 일치 문장이 없으면 "Feedbacks": []로 반환.
- sentence는 원문과 완전 일치, feedback은 평가가 불가능한 구체 사유를 1-2문장으로 간결히 서술(한국어).
"""

# Usage function
def get_validation_prompt(validation_type):
    """
    Get the appropriate validation prompt for a given type.
    
    Args:
        validation_type (str): One of 'blue_highlight', 'red_line', 'blue_line', 'black_line', 'red_check'
    
    Returns:
        str: The validation prompt for that type
    """
    prompts = {
        'blue_highlight': BLUE_HIGHLIGHT_PROMPT,
        'red_line': RED_LINE_PROMPT,
        'blue_line': BLUE_LINE_PROMPT,
        'black_line': BLACK_LINE_PROMPT,
        'red_check': RED_CHECK_PROMPT
    }
    
    return prompts.get(validation_type, "Invalid validation type")

if __name__ == "__main__":
    print("Available validation prompts:")
    print("1. blue_highlight - 진로 역량 강조")
    print("2. red_line - 구체적 노력·깊이 강조")
    print("3. blue_line - 연계·후속 탐구 강조")
    print("4. black_line - 구체성 부족")
    print("5. red_check - 평가 불가 수준의 정보 부족")
    
    validation_type = input("Enter validation type: ").strip().lower()
    
    if validation_type in ['blue_highlight', 'red_line', 'blue_line', 'black_line', 'red_check']:
        print("\n" + "="*80 + "\n")
        print(get_validation_prompt(validation_type))
    else:
        print("Invalid validation type. Use: blue_highlight, red_line, blue_line, black_line, or red_check")